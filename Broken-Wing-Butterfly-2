
javascript:function premium(i){var o=$(i).find(".midpoint span span span");return o&&o[0]&&o[0].innerHTML?Number(o[0].innerHTML):(console.log("issue.",$(i)),0)}function butterfly(i,n,o){for(var t=1;t<=i;t++){$(n[0]).append("<th>"+t+"-pt</th>"),$(n[n.length]).append("<td>"+t+"-pt</td>");for(var r=t+1;r<n.length-(t+1);r++){var e;console.log("width",t,"spread",r),e=o&&0<o?(premium(n[r-t])+premium(n[r+t+o])-2*premium(n[r])).toFixed(2):o&&o<0?(premium(n[r-t+o])+premium(n[r+t])-2*premium(n[r])).toFixed(2):(premium(n[r-t])+premium(n[r+t])-2*premium(n[r])).toFixed(2),console.log("spreadCost: "+e),$(n[r]).append("<td data-i='"+r+"' data-w='"+t+"' data-wing='"+o+"'>"+e+"</td>"),$(n[r]).find("td:last").on("mouseenter",function(i,o){i=$(this).data("i"),o=$(this).data("w");var t=$(this).data("wing");$(this).css({"background-color":"yellow","font-weight":"bolder"}),$(n[i]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"}),t&&0<t?($(n[i-o]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"}),$(n[i+o+t]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"})):(t&&t<0?$(n[i-o+t]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"}):$(n[i-o]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"}),$(n[i+o]).find(".strikePrice,.midpoint").css({"background-color":"yellow","font-weight":"bolder"}))}).on("mouseleave",function(){var i=$(this).data("i"),o=$(this).data("w"),t=$(this).data("wing");$(this).css({"background-color":"","font-weight":"normal"}),$(n[i]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"}),t&&0<t?($(n[i-o]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"}),$(n[i+o+t]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"})):(t&&t<0?$(n[i-o+t]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"}):$(n[i-o]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"}),$(n[i+o]).find(".strikePrice,.midpoint").css({"background-color":"","font-weight":"normal"}))})}for(r=1;r<=t;r++)$(n[r]).append("<td>-</td>");for(r=n.length-t-1;r<n.length;r++)$(n[r]).append("<td>-</td>")}}function main(){var i=$("table"),o=($(".midpoint"),$($(i)[0]).find("tr")),t=$($(i)[1]).find("tr");$(".lastPrice,.percentFromLast,.priceChange").remove(),butterfly(10,o,2),butterfly(10,t,-2)}main();


